import{_ as a}from"./singletons-ebd0adcd.js";a.disable_scroll_handling;const H=a.goto;a.invalidate;a.invalidateAll;a.preload_data;a.preload_code;a.before_navigate;a.after_navigate;const g=t=>t==null?void 0:t.split("/wiki/")[1],R=t=>t==null?void 0:t.replace(/\s/g,"_"),x=(t,s)=>(f(t,s),{update(e){f(t,e)}}),f=(t,s)=>{for(const e in s)t.style.setProperty(`--${e}`,s[e])},i={BORN:"born",DIED:"died",CAUSE_OF_DEATH:"causeofdeath",BURIAL:"burial",PARENTS:"parent",FATHER:"father",MOTHER:"mother"},h=["Hesiod"],E=(t,s="")=>{if(!document)return;const e=document.createElement("div");return e.innerHTML=t==null?void 0:t.trim(),e.setAttribute("id",s),e.style.display="none",document.body.appendChild(e),e},b=t=>{var e;const s=((e=document.getElementById(t))==null?void 0:e.querySelector(".infobox-image img"))??null;if(s)return s.src},l=(t,s)=>{var r,c;const e=(r=document.getElementById(t))==null?void 0:r.getElementsByTagName("th");if(!e)return;const n=Array.from(e);return(c=n==null?void 0:n.find(({innerText:o})=>{const A=o==null?void 0:o.toLowerCase().replace(/\s/g,"");return new RegExp("^"+s).test(A)}))==null?void 0:c.nextElementSibling},u=(t,s)=>{var e;return((e=l(t,s))==null?void 0:e.innerText)||""},T=t=>{const s=[],e=l(t,i.PARENTS),n=l(t,i.FATHER),r=l(t,i.MOTHER);if(e){const c=Array.from(e.getElementsByTagName("a")).map(m).filter(o=>o&&!h.includes(o));c&&s.push(...c)}return n&&s.push(m(n)),r&&s.push(m(r)),s},m=t=>{const s=t.getElementsByTagName("a")[0];return s?w(s):t.innerText},w=t=>{const s=t==null?void 0:t.getAttribute("href");if(!(s!=null&&s.includes("#cite")))return g(s)},_=t=>{const s=b(t),e=u(t,i.BORN),n=u(t,i.DIED),r=u(t,i.CAUSE_OF_DEATH),c=u(t,i.BURIAL),o=T(t);return{image:s,bornDate:e,diedDate:n,causeofDeath:r,burial:c,parentsNames:o}},I=({text:t,title:s,pageid:e,pageName:n})=>{const r=t||"";if(!(!r||typeof window>"u"))return E(r,e==null?void 0:e.toString()),{..._((e==null?void 0:e.toString())||""),name:s,pageid:e,pageName:n}},v=({text:t,pageid:s})=>{var c;const e=t;if(!e||!(e!=null&&e.includes('<div class="mw-parser-output"><div class="redirectMsg"><p>Redirect to:</p><ul class="redirectText">')))return;const n=E(e,`${(s==null?void 0:s.toString())||""}-redirect-remove`),r=(c=n==null?void 0:n.querySelector(".redirectText li a"))==null?void 0:c.getAttribute("href");return g(r)},B=t=>{var s;return(s=document.getElementById(t))==null?void 0:s.remove()},C=()=>document.querySelectorAll('[id$="redirect-remove"]'),L=t=>{t.forEach(s=>B(s)),Array.from(C()).forEach(s=>s==null?void 0:s.remove())},$=(t,s="auto")=>{const e=document.getElementById(t);e==null||e.scrollIntoView({block:"center",inline:"center",behavior:s})},y="https://en.wikipedia.org/w/api.php?format=json",O="formatversion=2",p="origin=*",d=async t=>{const s=await fetch(`${y}&action=parse&page=${t}&prop=text&${O}&${p}`),{parse:e}=await s.json(),n=v(e);return n?{status:200,redirection:n}:{status:200,pageContent:e}},S=async t=>{var s;try{let e="";typeof t!="string"?e=((s=t==null?void 0:t.url)==null?void 0:s.searchParams.get("q"))||"":e=t;const{redirection:n,status:r,pageContent:c}=await d(e);if(!n)return{status:r,body:c};const o=await d(n);return{status:o==null?void 0:o.status,body:o==null?void 0:o.pageContent}}catch(e){const n=e;return{status:403,message:(n==null?void 0:n.message)||""}}},k=async t=>{try{const s=R(t),e=await fetch(`${y}&action=query&list=search&srsearch=${s}&utf8=&srsort=relevance&srlimit=5&${p}`),{query:{search:n}}=await e.json();return{body:n,status:200}}catch(s){const e=s;return{status:403,message:(e==null?void 0:e.message)||""}}};export{S as G,k as a,I as b,x as c,L as d,R as f,H as g,$ as s};
